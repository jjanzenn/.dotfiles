#+title: Homebrew Configuration

Set up Homebrew. I disable the quarantine automatically and ensure that the state of Homebrew is exactly as specified here.
#+begin_src nix
  { config, pkgs, ... }:

  {
    homebrew = {
      enable = true;

      caskArgs.no_quarantine = true;

      global.autoUpdate = false;
      onActivation = {
        autoUpdate = true;
        cleanup = "zap";
        upgrade = true;
      };

      taps = [
        "d12frosted/emacs-plus"
        "homebrew/bundle"
        "homebrew/cask-fonts"
        "homebrew/cask-versions"
        "homebrew/services"
        "jorgelbg/tap"
        "osx-cross/avr"
      ];

      brews = [
        "choose-gui" # nix version fails to build
        "clang-format" # nix version screws up clang setup
        {
          name = "emacs-plus@30"; # handled better with homebrew than nix
          args = [
            "with-native-comp"
            "with-imagemagick"
            "with-xwidgets"
            "with-mailutils"
            "with-ctags"
            "with-retro-emacs-logo-icon"
          ];
        }
        "hunspell"
        "hyfetch"
        "ispell"
        "libgccjit"
        "librsvg"
        "open-mpi"
        "open-ocd"
        "openjdk"
        "pinentry-mac"
        "pinentry-touchid"
        "sevenzip"

        # need for grading purposes
        "avrdude"
        "osx-cross/avr/avr-binutils"
        "osx-cross/avr/avarice"
        "osx-cross/avr/avr-gcc@14"

        # required by emacs-plus@30
        "imagemagick"
        "jansson"
        "jpeg"
        "mailutils"
        "tree-sitter"
      ];

      casks = [
        "audacity"
        "blender"
        "cabal"
        "calibre"
        "desmume"
        "dwarf-fortress-lmp"
        "firefox"
        "gcc-arm-embedded"
        "ghostty"
        "gimp"
        "godot"
        "inkscape"
        "krita"
        "multimc"
        "obs"
        "openemu"
        "pokemon-showdown"
        "proton-mail-bridge"
        "protonvpn"
        "qbittorrent"
        "rar"
        "syncthing"
        "thunderbird"
        "vlc"
        "whisky"
        "zen-browser"
        "zotero"
       ];
    };
  }
#+end_src
